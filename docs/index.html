<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>factorize: Create factors from categorical variables</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">factorize
   </div>
   <div id="projectbrief">Create factors from categorical variables</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Create factors from categorical variables </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__2github_2workspace_2README"></a></p>
<p><img src="https://github.com/libscran/factorize/actions/workflows/run-tests.yaml/badge.svg" alt="Unit tests" style="pointer-events: none;" class="inline"/> <img src="https://github.com/libscran/factorize/actions/workflows/doxygenate.yaml/badge.svg" alt="Documentation" style="pointer-events: none;" class="inline"/> <a href="https://codecov.io/gh/libscran/factorize"><img src="https://codecov.io/gh/libscran/factorize/graph/badge.svg?token=JWV0I4WJX2" alt="Codecov" style="pointer-events: none;" class="inline"/></a></p>
<h1>Overview</h1>
<p>This repository contains functions to create <a href="https://r4ds.had.co.nz/factors.html">R-style factors</a> from categorical variables. Each factor is represented by (i) an array of integer codes in the interval $[0, N)$ and (ii) an array of length $N$ containing sorted and unique levels. For any given observation, its value in the categorical variable can be retrieved by indexing the array of levels by its code. Factors are useful as they map arbitrary variables onto integer codes that can be easily processed by other functions.</p>
<h1>Quick start</h1>
<p>We can create a factor from any categorical variable:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &quot;<a class="code" href="factorize_8hpp.html">factorize/factorize.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line">std::vector&lt;std::string&gt; group { <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>, <span class="stringliteral">&quot;C&quot;</span>, <span class="stringliteral">&quot;A&quot;</span>, <span class="stringliteral">&quot;B&quot;</span>, <span class="stringliteral">&quot;C&quot;</span> };</div>
<div class="line"> </div>
<div class="line">std::vector&lt;int&gt; codes(group.size());</div>
<div class="line"><span class="keyword">auto</span> levels = <a class="code hl_function" href="namespacefactorize.html#a0bd6c4e3624487dc86c0905ccdd1cce2">factorize::create_factor</a>(group.size(), group.data(), codes.data());</div>
<div class="line"> </div>
<div class="line">group[0] == levels[codes[0]]; <span class="comment">// true</span></div>
<div class="ttc" id="afactorize_8hpp_html"><div class="ttname"><a href="factorize_8hpp.html">factorize.hpp</a></div><div class="ttdoc">Create factors from categorical variables.</div></div>
<div class="ttc" id="anamespacefactorize_html_a0bd6c4e3624487dc86c0905ccdd1cce2"><div class="ttname"><a href="namespacefactorize.html#a0bd6c4e3624487dc86c0905ccdd1cce2">factorize::create_factor</a></div><div class="ttdeci">std::vector&lt; Input_ &gt; create_factor(const std::size_t n, const Input_ *const input, Code_ *const codes)</div><div class="ttdef"><b>Definition</b> create_factor.hpp:39</div></div>
</div><!-- fragment --><p>We can also easily create a factor from multiple variables, where the "levels" will be sorted and unique combinations of the variables.</p>
<div class="fragment"><div class="line">std::vector&lt;char&gt; grouping1 { <span class="charliteral">&#39;c&#39;</span>, <span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;c&#39;</span> };</div>
<div class="line">std::vector&lt;char&gt; grouping2 { <span class="charliteral">&#39;A&#39;</span>, <span class="charliteral">&#39;B&#39;</span>, <span class="charliteral">&#39;C&#39;</span>, <span class="charliteral">&#39;C&#39;</span>, <span class="charliteral">&#39;B&#39;</span>, <span class="charliteral">&#39;A&#39;</span> };</div>
<div class="line"> </div>
<div class="line">std::vector&lt;int&gt; combined_codes(grouping1.size()); </div>
<div class="line"><span class="keyword">auto</span> combined_levels = <a class="code hl_function" href="namespacefactorize.html#a18cfb52c8107a752fc47fccc09d278b0">factorize::combine_to_factor</a>(</div>
<div class="line">    grouping1.size(), </div>
<div class="line">    std::vector&lt;const int*&gt;{ grouping1.data(), grouping2.data() },</div>
<div class="line">    combined_codes.data()</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">grouping1[0] == combined_levels[0][combined_codes[0]]; <span class="comment">// true</span></div>
<div class="line">grouping2[0] == combined_levels[1][combined_codes[0]]; <span class="comment">// true</span></div>
<div class="ttc" id="anamespacefactorize_html_a18cfb52c8107a752fc47fccc09d278b0"><div class="ttname"><a href="namespacefactorize.html#a18cfb52c8107a752fc47fccc09d278b0">factorize::combine_to_factor</a></div><div class="ttdeci">std::vector&lt; std::vector&lt; Input_ &gt; &gt; combine_to_factor(const std::size_t n, const std::vector&lt; const Input_ * &gt; &amp;inputs, Code_ *const codes)</div><div class="ttdef"><b>Definition</b> combine_to_factor.hpp:43</div></div>
</div><!-- fragment --><p>Check out the <a href="https://libscran.github.io/factorize">reference documentation</a> for more details.</p>
<h1>Building projects</h1>
<h2>CMake with <code>FetchContent</code></h2>
<p>If you're using CMake, you just need to add something like this to your <code>CMakeLists.txt</code>:</p>
<div class="fragment"><div class="line">include(FetchContent)</div>
<div class="line"> </div>
<div class="line">FetchContent_Declare(</div>
<div class="line">  factorize</div>
<div class="line">  GIT_REPOSITORY https://github.com/libscran/factorize</div>
<div class="line">  GIT_TAG master # or any version of interest</div>
<div class="line">)</div>
<div class="line"> </div>
<div class="line">FetchContent_MakeAvailable(factorize)</div>
</div><!-- fragment --><p>Then you can link to <b>factorize</b> to make the headers available during compilation:</p>
<div class="fragment"><div class="line"># For executables:</div>
<div class="line">target_link_libraries(myexe ltla::factorize)</div>
<div class="line"> </div>
<div class="line"># For libaries</div>
<div class="line">target_link_libraries(mylib INTERFACE ltla::factorize)</div>
</div><!-- fragment --><h2>CMake with <code>find_package()</code></h2>
<div class="fragment"><div class="line">find_package(ltla_factorize CONFIG REQUIRED)</div>
<div class="line">target_link_libraries(mylib INTERFACE ltla::factorize)</div>
</div><!-- fragment --><p>To install the library, use:</p>
<div class="fragment"><div class="line">mkdir build &amp;&amp; cd build</div>
<div class="line">cmake .. -DFACTORIZE_TESTS=OFF</div>
<div class="line">cmake --build . --target install</div>
</div><!-- fragment --><p>By default, this will use <code>FetchContent</code> to fetch all external dependencies. If you want to install them manually, use <code>-DFACTORIZE_FETCH_EXTERN=OFF</code>. See the tags in <a href="extern/CMakeLists.txt"><code>extern/CMakeLists.txt</code></a> to find compatible versions of each dependency.</p>
<h2>Manual</h2>
<p>If you're not using CMake, the simple approach is to just copy the files in <code>include/</code> - either directly or with Git submodules - and include their path during compilation with, e.g., GCC's <code>-I</code>. This also requires the external dependencies listed in <a href="extern/CMakeLists.txt"><code>extern/CMakeLists.txt</code></a>. </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"></a>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
